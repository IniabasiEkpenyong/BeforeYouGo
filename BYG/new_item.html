<!-- Add New Item Modal -->
<div id="addNewModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-lg shadow-xl w-full max-w-xl overflow-hidden">
      <div class="border-b border-gray-200 px-6 py-4 flex justify-between items-center">
        <h3 class="text-lg font-medium text-gray-900">Add New Bucket List Item</h3>
        <button type="button" onclick="closeAddNewModal()" class="text-gray-400 hover:text-gray-500">
          <span class="text-2xl">&times;</span>
        </button>
      </div>
      <form id="addItemForm" action="/create_item" method="POST" class="px-6 py-4 space-y-4">
        <input type="hidden" name="priv" value="False" />
        
        <div>
          <label for="titleInput" class="block font-medium">Title:</label>
          <input type="text" name="title" id="titleInput" required class="w-full border rounded px-3 py-2" />
        </div>
        
        <div>
          <label for="contactInput" class="block font-medium">Contact:</label>
          <input type="text" name="contact" id="contactInput" required class="w-full border rounded px-3 py-2" />
        </div>
        
        <div>
          <label for="areaInput" class="block font-medium">Location:</label>
          <input type="text" name="area" id="areaInput" required class="w-full border rounded px-3 py-2" />
          <input type="hidden" name="lat" id="latInput">
          <input type="hidden" name="lng" id="lngInput">
        </div>
        
        <div>
          <label for="descripInput" class="block font-medium">Description:</label>
          <input type="text" name="descrip" id="descripInput" required class="w-full border rounded px-3 py-2" />
        </div>
  
        <div>
          <label for="categoryInput" class="block font-medium">Category:</label>
          <input type="text" name="category" id="categoryInput" required class="w-full border rounded px-3 py-2" />
        </div>
        
        <div class="text-right">
          <button type="submit" class="bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600">
            Submit
          </button>
        </div>
      </form>
    </div>
  </div>
  

  <script>
    function openAddNewModal() {
      document.getElementById("addNewModal").classList.remove("hidden");
    }
  
    function closeAddNewModal() {
      document.getElementById("addNewModal").classList.add("hidden");
    }
  
    // Google Places Autocomplete
    let autocompleteUsed = false;
  
    function initAddItemAutocomplete() {
      const input = document.getElementById("areaInput");
      const autocomplete = new google.maps.places.Autocomplete(input);
  
      autocomplete.addListener("place_changed", () => {
        const place = autocomplete.getPlace();
        if (!place.geometry || !place.geometry.location) return;
  
        document.getElementById("latInput").value = place.geometry.location.lat();
        document.getElementById("lngInput").value = place.geometry.location.lng();
        autocompleteUsed = true;
      });
  
      document.getElementById("addItemForm").addEventListener("submit", function (e) {
        if (!autocompleteUsed) {
          e.preventDefault();
          alert("Please select a valid location.");
          input.focus();
        }
      });
    }
  </script>
  
  <script src="https://maps.googleapis.com/maps/api/js?key={{ api_key }}&libraries=places&callback=initAddItemAutocomplete" async defer></script>
  