<!DOCTYPE html>
<html>
<head>
  <title>My Bucket List</title>
</head>
<body>
  {% include 'header.html' %}
  <h1>My Bucket List</h1>

  {% if user_items|length == 0 %}
    <p>You have no items in your personal list yet.</p>
  {% else %}

  <!-- I think the best way to do this is to FIRST collect 
    two seperate lists; one of completed and one of uncompleted items.
    Then we can lay them out as two tables. It also makes it easy to 
    calculate the progress bar here. -->
  [Note to Devs: progress bar in development here]
  You have {{ user_items|length }} in your personal list.
  You have completed [we gotta calculate this #] of them. 
    <!--<table border="1">-->
    <table class="table table-striped align-middle">
      <tr>
        <th>Title</th>
        <th>Location</th>
        <th>Description</th>
        <th>Completed?</th>
        <th><!-- Completed button col --></th>
        <th><!-- Delete button col --></th>
      </tr>
      {% for ub, bucket in user_items %}
        <tr>
          <td>{{ bucket.item }}</td>
          <td>{{ bucket.area }}</td>
          <td>{{ bucket.descrip }}</td>
          <td>
            {% if ub.completed %}
              Yes
            {% else %}
              No
            {% endif %}
          </td>
          <td>
            {% if not ub.completed %}
              <form action="/mark_completed" method="POST" style="display:inline;">
                <input type="hidden" name="user_bucket_id" value="{{ ub.id }}">
                <input type="submit" value="Mark Completed">
              </form>
            {% else %}
                <form action="/reset_completed" method="POST" style="display:inline;">
                    <input type="hidden" name="user_bucket_id" value="{{ ub.id }}">
                    <input type="submit" value="Reset">
                </form>
            {% endif %}
          </td>
          <td>
            <form action="/remove_from_my_list" method="POST" style="display:inline;">
                <input type="hidden" name="user_bucket_id" value="{{ ub.id }}">
                <input type="submit" value="Delete">
            </form>
          </td>
        </tr>
      {% endfor %}
    </table>
  {% endif %}
  <br>
  <a href="/global">Back to Global List</a>
  {% include 'footer.html' %}
</body>
</html>